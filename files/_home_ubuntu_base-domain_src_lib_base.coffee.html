<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/home/ubuntu/base-domain/src/lib/base.coffee - base-domain</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="base-domain"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AggregateRoot.html">AggregateRoot</a></li>
            
                <li><a href="../classes/Base.html">Base</a></li>
            
                <li><a href="../classes/BaseAsyncRepository.html">BaseAsyncRepository</a></li>
            
                <li><a href="../classes/BaseDict.html">BaseDict</a></li>
            
                <li><a href="../classes/BaseFactory.html">BaseFactory</a></li>
            
                <li><a href="../classes/BaseList.html">BaseList</a></li>
            
                <li><a href="../classes/BaseModel.html">BaseModel</a></li>
            
                <li><a href="../classes/BaseModule.html">BaseModule</a></li>
            
                <li><a href="../classes/BaseRepository.html">BaseRepository</a></li>
            
                <li><a href="../classes/BaseService.html">BaseService</a></li>
            
                <li><a href="../classes/BaseSyncRepository.html">BaseSyncRepository</a></li>
            
                <li><a href="../classes/Collection.html">Collection</a></li>
            
                <li><a href="../classes/DomainError.html">DomainError</a></li>
            
                <li><a href="../classes/Entity.html">Entity</a></li>
            
                <li><a href="../classes/EntityCollectionIncluder.html">EntityCollectionIncluder</a></li>
            
                <li><a href="../classes/EntityPool.html">EntityPool</a></li>
            
                <li><a href="../classes/Facade.html">Facade</a></li>
            
                <li><a href="../classes/FactoryInterface.html">FactoryInterface</a></li>
            
                <li><a href="../classes/Fixture.html">Fixture</a></li>
            
                <li><a href="../classes/FixtureLoader.html">FixtureLoader</a></li>
            
                <li><a href="../classes/GeneralFactory.html">GeneralFactory</a></li>
            
                <li><a href="../classes/Includer.html">Includer</a></li>
            
                <li><a href="../classes/LocalRepository.html">LocalRepository</a></li>
            
                <li><a href="../classes/MasterDataResource.html">MasterDataResource</a></li>
            
                <li><a href="../classes/MasterRepository.html">MasterRepository</a></li>
            
                <li><a href="../classes/MemoryResource.html">MemoryResource</a></li>
            
                <li><a href="../classes/ModelProps.html">ModelProps</a></li>
            
                <li><a href="../classes/ResourceClientInterface.html">ResourceClientInterface</a></li>
            
                <li><a href="../classes/RootInterface.html">RootInterface</a></li>
            
                <li><a href="../classes/Scope.html">Scope</a></li>
            
                <li><a href="../classes/TypeInfo.html">TypeInfo</a></li>
            
                <li><a href="../classes/ValueObject.html">ValueObject</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/base-domain.html">base-domain</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: /home/ubuntu/base-domain/src/lib/base.coffee</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x27;use strict&#x27;

DomainError = require &#x27;./domain-error&#x27;

{ hyphenize } = require &#x27;../util&#x27;

getProto = Object.getPrototypeOf ? (obj) -&gt; obj.__proto__

###*
parent class of model, factory, repository and service

gives them &#x60;this.facade&#x60; property

@class Base
@module base-domain
###
class Base
    Object.defineProperty @::, &#x27;facade&#x27;, get: -&gt; @root.facade

    @isBaseDomainClass: true

    ###*
    Hyphenized name.
    The name should equal to the file name (without path and extension).
    If not set, facade will set the file name automatically.
    This property were not necessary if uglify-js would not mangle class name...

    @property {String} className
    @static
    @private
    ###
    @className: null


    constructor: (root) -&gt;

        @setRoot(root)

        # add class to facade, if not registered.
        if @root
            facade = @facade
            if @constructor.className and not facade.hasClass @constructor.className
                facade.addClass @constructor.className, @constructor



    ###*
    @method setRoot
    @protected
    ###
    setRoot: (root) -&gt;

        if not root?.constructor.isRoot
            console.error(&quot;&quot;&quot;
                base-domain: [warning] constructor of &#x27;#{@constructor.name}&#x27; was not given RootInterface (e.g. facade).
            &quot;&quot;&quot;)

            { latestInstance } = require(&#x27;./facade&#x27;)

            if latestInstance?
                console.error(&quot;&quot;&quot;
                    @root is automatically set, value is the most recently created facade via Facade.createInstance().
                    ( class name: #{latestInstance.constructor.name} )
                &quot;&quot;&quot;)
                root = latestInstance

            else
                console.error(&quot;&quot;&quot;@root, @facade is unavailable.&quot;&quot;&quot;)
                root = null

            console.error new Error().stack

        ###*
        @property {RootInterface} root
        ###
        Object.defineProperty @, &#x27;root&#x27;,
            value: root
            writable: true


    ###*
    Get facade

    @deprecated just use this.facade
    @method getFacade
    @return {Facade}
    ###
    getFacade: -&gt;
        if not @root?
            throw @error &#x27;base-domain:noFacadeAssigned&#x27;, &quot;&quot;&quot;&#x27;#{@constructor.name}&#x27; does not have @root.
            Give it via constructor or create instance via Facade.
            &quot;&quot;&quot;

        @root.facade

    ###*
    Get module which this class belongs to

    @method getModule
    @return {BaseModule}
    ###
    getModule: -&gt;
        @facade.getModule(@constructor.moduleName)


    ###*
    get parent class
    @method getParent
    @return {Function}
    ###
    @getParent: -&gt;
        getProto(@::).constructor


    ###*
    get className

    @method getName
    @public
    @static
    @return {String}
    ###
    @getName: -&gt;

        if not @className or @getParent().className is @className

            hyphenized = hyphenize @name

            console.error(&quot;&quot;&quot;
                @className property is not defined at class #{@name}.
                It will automatically be set when required through Facade.
                You might have loaded this class not via Facade.
                We guess the name &quot;#{hyphenized}&quot; by the function name instead of @className.
                It would not work at mangled JS (uglify-js).
            &quot;&quot;&quot;)

            console.error new Error().stack

            return hyphenize @name


        return @className


    ###*
    create instance of DomainError

    @method error
    @param {String} reason reason of the error
    @param {String} [message]
    @return {Error}
    ###
    error: (reason, message) -&gt;

        new DomainError(reason, message)


    ###*
    Show indication message of deprecated method

    @method deprecated
    @protected
    @param {String} methodName
    @param {String} message
    @return {Error}
    ###
    deprecated: (methodName, message) -&gt;
        try
            line = new Error().stack.split(&#x27;\n&#x27;)[3]
            console.warn(&quot;Deprecated method: &#x27;#{methodName}&#x27;. #{message if message}\n&quot;, line)
        catch e

module.exports = Base

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
