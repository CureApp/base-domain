<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>/home/ubuntu/base-domain/src/lib/model-props.coffee - base-domain</title>
    <link rel="stylesheet" href="http://yui.yahooapis.com/3.9.1/build/cssgrids/cssgrids-min.css">
    <link rel="stylesheet" href="../assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="../assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="../assets/favicon.png">
    <script src="http://yui.yahooapis.com/combo?3.9.1/build/yui/yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="../assets/css/logo.png" title="base-domain"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="../classes/AggregateRoot.html">AggregateRoot</a></li>
            
                <li><a href="../classes/Base.html">Base</a></li>
            
                <li><a href="../classes/BaseAsyncRepository.html">BaseAsyncRepository</a></li>
            
                <li><a href="../classes/BaseDict.html">BaseDict</a></li>
            
                <li><a href="../classes/BaseFactory.html">BaseFactory</a></li>
            
                <li><a href="../classes/BaseList.html">BaseList</a></li>
            
                <li><a href="../classes/BaseModel.html">BaseModel</a></li>
            
                <li><a href="../classes/BaseModule.html">BaseModule</a></li>
            
                <li><a href="../classes/BaseRepository.html">BaseRepository</a></li>
            
                <li><a href="../classes/BaseService.html">BaseService</a></li>
            
                <li><a href="../classes/BaseSyncRepository.html">BaseSyncRepository</a></li>
            
                <li><a href="../classes/Collection.html">Collection</a></li>
            
                <li><a href="../classes/DomainError.html">DomainError</a></li>
            
                <li><a href="../classes/Entity.html">Entity</a></li>
            
                <li><a href="../classes/EntityCollectionIncluder.html">EntityCollectionIncluder</a></li>
            
                <li><a href="../classes/EntityPool.html">EntityPool</a></li>
            
                <li><a href="../classes/Facade.html">Facade</a></li>
            
                <li><a href="../classes/FactoryInterface.html">FactoryInterface</a></li>
            
                <li><a href="../classes/Fixture.html">Fixture</a></li>
            
                <li><a href="../classes/FixtureLoader.html">FixtureLoader</a></li>
            
                <li><a href="../classes/GeneralFactory.html">GeneralFactory</a></li>
            
                <li><a href="../classes/Includer.html">Includer</a></li>
            
                <li><a href="../classes/LocalRepository.html">LocalRepository</a></li>
            
                <li><a href="../classes/MasterDataResource.html">MasterDataResource</a></li>
            
                <li><a href="../classes/MasterRepository.html">MasterRepository</a></li>
            
                <li><a href="../classes/MemoryResource.html">MemoryResource</a></li>
            
                <li><a href="../classes/ModelProps.html">ModelProps</a></li>
            
                <li><a href="../classes/ResourceClientInterface.html">ResourceClientInterface</a></li>
            
                <li><a href="../classes/RootInterface.html">RootInterface</a></li>
            
                <li><a href="../classes/Scope.html">Scope</a></li>
            
                <li><a href="../classes/TypeInfo.html">TypeInfo</a></li>
            
                <li><a href="../classes/ValueObject.html">ValueObject</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="../modules/base-domain.html">base-domain</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: /home/ubuntu/base-domain/src/lib/model-props.coffee</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x27;use strict&#x27;
{ TYPES } = require &#x27;./type-info&#x27;

###*
parses model properties and classifies them

@class ModelProps
@module base-domain
###
class ModelProps

    ###*
    @param {String} modelName
    @param {Object} properties
    @param {BaseModule} modl
    ###
    constructor: (@modelName, properties, modl) -&gt;

        ###*
        property whose type is CREATED_AT
        @property {String} createdAt
        @public
        @readonly
        ###
        @createdAt = null

        ###*
        property whose type is UPDATED_AT
        @property {String} updatedAt
        @public
        @readonly
        ###
        @updatedAt = null

        # private
        @subModelProps = []
        @typeInfoDic = {}
        @entityDic = {}
        @enumDic = {}
        @dateDic = {}


        @parse properties, modl

    ###*
    properties whose type is DATE, CREATED_AT and UPDATED_AT
    @property {Array(String)} dates
    @public
    @readonly
    ###
    Object.defineProperty @::, &#x27;dates&#x27;, get: -&gt; Object.keys(@dateDic)

    ###*
    parse props by type

    @method parse
    @private
    ###
    parse: (properties, modl) -&gt;

        for prop, typeInfo of properties
            @parseProp(prop, typeInfo, modl)
        return



    ###*
    parse one prop by type

    @method parseProp
    @private
    ###
    parseProp: (prop, typeInfo, modl) -&gt;

        @typeInfoDic[prop] = typeInfo

        switch typeInfo.typeName

            when &#x27;DATE&#x27;
                @dateDic[prop] = true

            when &#x27;CREATED_AT&#x27;
                @createdAt = prop
                @dateDic[prop] = true

            when &#x27;UPDATED_AT&#x27;
                @updatedAt = prop
                @dateDic[prop] = true

            when &#x27;MODEL&#x27;
                @parseSubModelProp(prop, typeInfo, modl)

        return


    ###*
    parse submodel prop

    @method parseSubModelProp
    @private
    ###
    parseSubModelProp: (prop, typeInfo, modl) -&gt;

        @subModelProps.push prop

        if not modl?

            console.error(&quot;&quot;&quot;
                base-domain:ModelProps could not parse property info of &#x27;#{prop}&#x27;.
                (@TYPES.#{typeInfo.typeName}, model=#{typeInfo.model}.)
                Construct original model &#x27;#{@modelName}&#x27; with RootInterface.

                    new Model(obj, facade)
                    facade.createModel(&#x27;#{@modelName}&#x27;, obj)

            &quot;&quot;&quot;)
            return

        if modl.getModel(typeInfo.model).isEntity

            @entityDic[prop] = true

            idTypeInfo = TYPES.SUB_ID modelProp: prop, entity: typeInfo.model, omit: typeInfo.omit
            @parseProp(typeInfo.idPropName, idTypeInfo, modl)

        return


    ###*
    get all prop names

    @method getAllProps
    @public
    @return {Array(String)}
    ###
    getAllProps: -&gt;
        Object.keys @typeInfoDic


    ###*
    get all entity prop names

    @method getEntityProps
    @public
    @return {Array(String)}
    ###
    getEntityProps: -&gt;
        Object.keys @entityDic


    ###*
    get all model prop names

    @method getSubModelProps
    @public
    @return {Array(String)}
    ###
    getSubModelProps: -&gt;
        @subModelProps.slice()



    ###*
    check if the given prop is entity prop

    @method isEntity
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isEntity: (prop) -&gt;
        @entityDic[prop]?


    ###*
    check if the given prop is model prop

    @method isModel
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isModel: (prop) -&gt;
        @typeInfoDic[prop]?.typeName is &#x27;MODEL&#x27;


    ###*
    check if the given prop is submodel&#x27;s id

    @method isId
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isId: (prop) -&gt;
        @typeInfoDic[prop]?.typeName is &#x27;SUB_ID&#x27;

    ###*
    check if the given prop is date

    @method isDate
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isDate: (prop) -&gt;
        @dateDic[prop]?


    ###*
    check if the given prop is enum

    @method isEnum
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isEnum: (prop) -&gt;
        @typeInfoDic[prop]?.typeName is &#x27;ENUM&#x27;


    ###*
    get value - enum pair

    @method isEnumDic
    @public
    @param {String} prop
    @return {Object}
    ###
    getEnumDic: (prop) -&gt;
        @typeInfoDic[prop]?.numsByValue

    ###*
    get values of enum

    @method isEnumValues
    @public
    @param {String} prop
    @return {Array(String)}
    ###
    getEnumValues: (prop) -&gt;
        @typeInfoDic[prop]?.values.slice()


    ###*
    get entity prop of the given idPropName

    @method getEntityPropByIdProp
    @public
    @param {String} idPropName
    @return {String} submodelProp
    ###
    getEntityPropByIdProp: (idProp) -&gt;
        @typeInfoDic[idProp]?.modelProp


    ###*
    check if the given prop is tmp prop

    @method isOmitted
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isOmitted: (prop) -&gt;
        !!@typeInfoDic[prop]?.omit


    ###*
    get prop name of id of entity prop

    @method getIdPropByEntityProp
    @public
    @param {String} prop
    @return {String} idPropName
    ###
    getIdPropByEntityProp: (entityProp) -&gt;

        @typeInfoDic[entityProp]?.idPropName


    ###*
    get model name of model prop

    @method getSubModelProps
    @public
    @param {String} prop
    @return {String} model name
    ###
    getSubModelName: (prop) -&gt;

        @typeInfoDic[prop]?.model


    ###*
    check if the prop is optional

    @method isOptional
    @public
    @param {String} prop
    @return {Boolean}
    ###
    isOptional: (prop) -&gt;

        !!@typeInfoDic[prop]?.optional


    ###*
    get the default value of the prop

    @method getDefaultValue
    @public
    @param {String} prop
    @return {any} defaultValue
    ###
    getDefaultValue: (prop) -&gt;

        @typeInfoDic[prop]?.default



module.exports = ModelProps

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="../assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="../assets/js/yui-prettify.js"></script>
<script src="../assets/../api.js"></script>
<script src="../assets/js/api-filter.js"></script>
<script src="../assets/js/api-list.js"></script>
<script src="../assets/js/api-search.js"></script>
<script src="../assets/js/apidocs.js"></script>
</body>
</html>
